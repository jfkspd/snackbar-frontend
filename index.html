<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Snack Bar — Connectivity Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
   <style>
  body{font:16px system-ui, sans-serif; margin:24px;}
  .ok{color:#065f46} .warn{color:#7f1d1d}
  code{background:#f3f4f6; padding:2px 6px; border-radius:6px}

  /* NEW: simple card grid + stepper */
  .grid{
    display:grid; gap:10px;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  }
  .card{
    background:#fff; border:1px solid #e2e8f0; border-radius:12px; padding:10px;
  }
  .row{ display:flex; justify-content:space-between; align-items:center; gap:8px; }
  .name{ font-weight:600; }
  .price{ font-weight:700; }
  .id{ color:#475569; font-size:12px; }
  .stepper{
    display:inline-flex; align-items:center; overflow:hidden;
    border:1px solid #e2e8f0; border-radius:999px; background:#f8fafc;
  }
  .btn{
    border:0; background:transparent; padding:6px 10px; font-size:16px; cursor:pointer;
  }
  .qty{
    min-width:28px; text-align:center; padding:0 6px; background:#fff;
    border-left:1px solid #e2e8f0; border-right:1px solid #e2e8f0;
    font-variant-numeric: tabular-nums;
  }
  .summary{ color:#475569; margin:6px 0 10px; }
</style>

  </head>
  <body>
    <h1>Snack Bar — Connectivity Test</h1>
    <p>If you can read this on SCUSD Wi-Fi, static hosting is OK ✅</p>
    <h2>Fetch Test</h2>
    <p id="status">Running fetch test…</p>

    <label for="q">Search</label>
<input id="q" type="search" placeholder="e.g., chips, soda, 0003" 
       style="width: min(520px, 95%); padding: 8px; margin: 8px 0; font-size: 16px;">

<h2>Items</h2>
    <button onclick="testSubmit()">Test Submit (first cart item)</button>

<p id="summary" class="summary">0 items — $0.00</p>
<div id="items" class="grid" aria-live="polite"></div>

<script>
/*** GOOGLE FORM ENDPOINT ***/
const FORM_BASE = 'https://docs.google.com/forms/d/e/1FAIpQLScbRVY7T_IKUPx_xYcDlyncM0TV09piz-xd_eLSO04O7gd0TA/viewform';

const ENTRY = {
  order_id:       'entry.1662144781',
  payment_method: 'entry.1579496181',
  subtotal:       'entry.1026596473',
  paid:           'entry.459825042',
  change:         'entry.1466509759',
  item_id:        'entry.187752476',
  name:           'entry.1735654032',
  price_each:     'entry.224726774',
  qty:            'entry.348979745',
  line_total:     'entry.1281301043',
};

/*** Utility: escape HTML */
function esc(s){
  return String(s)
    .replaceAll('&','&amp;')
    .replaceAll('<','&lt;')
    .replaceAll('>','&gt;');
}

/*** Demo cart just so you can test */
let CART = [
  { item_id: '1', name: 'BIG GATORADE', price_each: 2.00, qty: 1, line_total: 2.00 }
];

/*** Build a prefilled Form URL from the first item in the cart */
function buildPrefillURL(){
  if (!CART.length) {
    alert('Cart is empty');
    return;
  }
  const orderId = 'O' + Date.now();   // quick unique id
  const subtotal = CART.reduce((s,it)=>s+it.line_total,0).toFixed(2);
  const paid = subtotal;
  const change = 0;
  const method = 'cash';
  const first = CART[0];

  const params = new URLSearchParams();
  params.set(ENTRY.order_id, orderId);
  params.set(ENTRY.payment_method, method);
  params.set(ENTRY.subtotal, subtotal);
  params.set(ENTRY.paid, paid);
  params.set(ENTRY.change, change);
  params.set(ENTRY.item_id, first.item_id);
  params.set(ENTRY.name, first.name);
  params.set(ENTRY.price_each, first.price_each);
  params.set(ENTRY.qty, first.qty);
  params.set(ENTRY.line_total, first.line_total);

  return `${FORM_BASE}?usp=pp_url&${params.toString()}`;
}

/*** Test button action */
function testSubmit(){
  const url = buildPrefillURL();
  if (url) window.open(url, '_blank');
}
</script>


    



  </body>
</html>
